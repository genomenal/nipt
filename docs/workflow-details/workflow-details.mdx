---
sidebar_position: 1
sidebar_label: Детали процесса анализа
---

# Детали процесса анализа

Получить подробную информацию о процессе анализа образцов, статусе выполнения стадий анализа, а также
скачать файлы с результатами стадий можно на вкладке "*Детали процесса анализа*" на странице образца:

<p align="center">
<img src={require('/img/rus/18-workflow-details.png').default} width="1000"/>
</p>

Кроме того, вы можете посмотреть детали каждой стадии анализа по отдельности, нажав
на кнопку <img src={require('/img/results/show_details.png').default} width="25"/> в строке этой
стадии в разделе <a href="/results#workflow">"Процесс анализа"</a> на вкладке "Главное" на
странице образца. Чтобы из деталей определенной стадии перейти к деталям всего процесса анализа образца,
нажмите на <img src={require('/img/rus/show_all_tasks.png').default} width="150"/>.

### Файл образца {#sample-files}

Вверху вкладки "*Детали процесса анализа*" можно скачать файл образца
в формате FASTQ, сжатый в GZIP архив. В случае загрузки образца с чередованием парных прочтений
для скачивания будут доступны первичный и парный файлы после разделения.
Справа от названия файла указан размер файла.

### Сжатие образца {#compress-sample}

В правом верхнем углу вкладки "*Детали процесса анализа*"
находится кнопка <img src={require('/img/rus/compress_sample.png').default} width="150"/>.
Нажав на эту кнопку, вы увидите форму для сжатия образцов:

<p align="center">
<img src={require('/img/rus/compress_form.png').default} width="400"/>
</p>

- Чтобы удалить файл образца, оставьте галочку у опции "*Удалить FASTQ файлы*".
После удаления файла невозможны перезапуск всего анализа
и перезапуск начальных стадий анализа "*Загрузка, идентификация и проверка*", "*Проверка качества и очистка*" и
"*Выравнивание*". Файл образца не будет доступен для скачивания на вкладке "*Детали процесса анализа*".
- Чтобы удалить файлы выравнивания образца, оставьте галочку у опции "*Удалить BAM файлы*".
Опция доступна только для образцов, для которых успешно завершилась стадия "*Выравнивание*".
После удаления файлов станет невозможным перезапуск стадий анализа, использующих файлы выравнивания:
"*Вычисление покрытия*" и "*Выявление вариации числа копий*".
На вкладке "*Главное*" не будут отображаться результаты выравнивания
(секция ["*Выравнивания*"](/results#alignments)), а в деталях задачи "*Выравнивание*"
в разделе "*Файлы с результатами*" не будут отображаться файлы в форматах BAM и BAI.
Чтобы восстановить файлы выравнивания, перезапустите стадию "*Выравнивание*".

Оставив галочки у тех опций, которые вы хотите сжать, нажмите
на <img src={require('/img/rus/delete.png').default} width="150"/>.
Сжать можно только те образцы, анализ которых не находится в процессе.

### Детали стадий анализа {#workflow-details}

На вкладке "*Детали процесса анализа*" находятся стадии, которые включены в анализ образца и выполнение
которых завершилось или находится в процессе:

<p align="center">
<img src={require('/img/rus/workflow_stages.png').default} width="900"/>
</p>

Для каждой стадии справа отображается статус её выполнения:
- Если стадия находится в процессе выполнения, то в её статусе есть
значок <img src={require('/img/results/in_process.png').default} width="22"/> и процентое
значение прогресса её выполнения.
- Если стадия завершена успешно, то она
имеет статус <img src={require('/img/rus/complete.png').default} width="100"/>.
- Если стадия завершена успешно, однако не все метрики качества удовлетворяют критериям,
то она имеет статус <img src={require('/img/rus/complete_metrics.png').default} width="100"/> с
указанием количества метрик, которые не соответствуют критериям.
- Если стадия завершена с ошибкой, то в её статусе есть
значок <img src={require('/img/results/failed.png').default} width="25"/> и указана конкретная задача, на которой
анализ прекратился.

Любую стадию можно развернуть, чтобы увидеть её детали, нажав на неё:

<p align="center">
<img src={require('/img/rus/stage_details.png').default} width="900"/>
</p>

Внутри каждой стадии находится таблица со следующими колонками:
- «ЗАДАЧА» - название задачи процесса анализа;
- «НАЧАЛО» - время старта выполнения задачи;
- «КОНЕЦ» - время окончания выполнения задачи;
- «СТАТУС»: если задача находится в процессе выполнения, то в её статусе есть
значок <img src={require('/img/results/in_process.png').default} width="22"/> и процентое
значение прогресса её выполнения; если задача завершена успешно, то она
имеет статус <img src={require('/img/results/complete.png').default} width="120"/>;
если задача завершена успешно, однако не все метрики качества удовлетворяют критериям,
то она имеет статус <img src={require('/img/results/complete_metrics.png').default} width="120"/> с
указанием количества метрик, которые не соответствуют критериям;
если задача завершена с ошибкой, то в её статусе есть
значок <img src={require('/img/results/failed.png').default} width="25"/> и указано название задачи.

Любую задачу можно развернуть, чтобы увидеть её детали, нажав на неё. Для задач может быть
приведена следующая информация:
- Вывод консоли о процессе выполнения задачи;
- Проблемы верификации (для задачи "*Проверка*");
- Файлы с результатами выполнения задачи: все файлы можно скачать или открыть в новой вкладке;
- Метрики (для задач "*Проверка качества*" и "*Выравнивание*");
- Технические детали выполнения задачи (инструмент, параметры);
- Ошибка при обработке, если задача завершилась с ошибкой.

### Ход анализа {#pipeline}

Ход анализа образца зависит от настроек, выбранных на этапе его загрузки
в виде [предустановки настроек](/settings/settings/settings).

Анализ образца может включать следующие стадии:
1. [Загрузка, идентификация и проверка](/workflow-details/upload-identify-verify);
2. [Проверка качества и очистка](/workflow-details/check-quality-and-cleanup);
3. [Выравнивание](/workflow-details/alignment), если в
анализ [включено выравнивание](/settings/settings/alignment-settings);
4. [Вычисление покрытия](/workflow-details/calculate-coverage), если в анализ
[включено выявление вариации числа копий](/settings/settings/cnv-discovery-settings);
5. [Выявление вариации числа копий](/workflow-details/cnv-discovery), если в
анализ [включено выявление вариации числа копий](/settings/settings/cnv-discovery-settings);
6. [Генерация отчётов](/workflow-details/report-generation), если:
- В системе есть хотя бы один активный [шаблон отчёта](/settings/report-templates/report-templates), у
которого есть хотя бы один [добавленный блок](/settings/report-templates/report-templates#add-block).
При этом шаблон отчёта должен быть добавлен в систему раньше, чем был обработан образец.
Если вы добавили или обновили шаблон
отчёта позже и хотите построить или обновить соответствующий отчёт для данного образца, то перезапустите
анализ образца с задачи "*Генерация отчётов*".
- В анализ образца включены выравнивание и выявление вариации числа копий.
- Анализ образца успешно завершился (то есть все стадии, включённые в анализ, имеют статус "*Завершено*").

<p align="center">
<img src={require('/img/rus/fq_pipeline.png').default} width="600"/>
</p>
